{{/*
  GetQuery
  Build the proper imgix query from given set of key/value pairs.

  @author @regisphilibert

  @use
    - tnd-imgix/private/ImgixifyArgs
    - tnd-imgix/private/GetDefaultsQueryParams

  @context Map

  @access private

  @return Map

  @example - Go Template
    {{ $args := dict "width" 1200 "height" "450" }}
    {{ with partialCached "tnd-imgix/private/GetQuery" $args $args }}
      {{ $src = . }}
    {{ end }}
*/}}
{{ $defaults := dict }}
{{ $args := dict }}
{{ if reflect.IsMap $ }}
  {{ $args = $ }}
  {{ with $args }}
    {{ $args = partialCached "tnd-imgix/private/ImgixifyArgs" . . }}
    {{ with partialCached "tnd-imgix/private/GetDefaultsQueryParams" $ "imgix_defaults" }} }}
      {{ $defaults = partialCached "tnd-imgix/private/ImgixifyArgs" . . }}
    {{ end }}
    {{ with $defaults }}
      {{ $args = merge $defaults $args }}
    {{ end }}
  {{ end }}  
{{ end }}


{{ return $args }}